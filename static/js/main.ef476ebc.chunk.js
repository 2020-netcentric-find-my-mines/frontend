(this["webpackJsonpfind-my-mines"]=this["webpackJsonpfind-my-mines"]||[]).push([[0],{112:function(e,t){},126:function(e,t,a){"use strict";a.r(t);var n,E=a(0),r=a.n(E),o=a(70),c=a.n(o),l=(a(82),a(83),a(17)),i=a(16),u=a(128),A=a(5),m=a(129),_=a(37),s=a(130),C=a(135),d=a(133),b=a(72),T=a.n(b),O=Object(E.createContext)({}),p=function(e){var t=e.children,a=Object(E.useState)(T()(("https://netcentric-architecture.herokuapp.com/","https://netcentric-architecture.herokuapp.com/"))),n=Object(l.a)(a,1)[0];return r.a.createElement(O.Provider,{value:{socket:n,emitEvent:function(e,t){n.emit(e,t)}}},t)};!function(e){e.CONNECTION="connection",e.DISCONNECT="disconnect",e.TICK="TICK",e.NEXT_PLAYER="NEXT_PLAYER",e.COORDINATED_SELECTED="COORDINATED_SELECTED",e.WINNER="WINNER",e.GAME_STATE_CHANGED="GAME_STATE_CHANGED",e.CURRENT_PLAYER="CURRENT_PLAYER",e.SELECT_COORDINATE_FEEDBACK="SELECT_COORDINATE_FEEDBACK",e.CREATE_GAME_FEEDBACK="CREATE_GAME_FEEDBACK",e.JOIN_GAME_FEEDBACK="JOIN_GAME_FEEDBACK",e.QUICK_MATCH_FEEDBACK="QUICK_MATCH_FEEDBACK",e.START_GAME_FEEDBACK="START_GAME_FEEDBACK",e.PLAY_AGAIN_FEEDBACK="PLAY_AGAIN_FEEDBACK",e.RESET_BOARD_FEEDBACK="RESET_BOARD_FEEDBACK",e.SET_BOARD_SIZE_FEEDBACK="SET_BOARD_SIZE_FEEDBACK",e.PAUSE_FEEDBACK="PAUSE_FEEDBACK",e.SET_NUMBER_OF_BOMB_FEEDBACK="SET_NUMBER_OF_BOMB_FEEDBACK",e.SET_MAX_PLAYER_FEEDBACK="SET_MAX_PLAYER_FEEDBACK",e.GET_CURRENT_PLAYER_FEEDBACK="GET_CURRENT_PLAYER_FEEDBACK",e.SET_PLAYER_NAME_FEEDBACK="SET_PLAYER_NAME_FEEDBACK",e.SELECT_COORDINATE="SELECT_COORDINATE",e.CREATE_GAME="CREATE_GAME",e.JOIN_GAME="JOIN_GAME",e.QUICK_MATCH="QUICK_MATCH",e.START_GAME="START_GAME",e.PLAY_AGAIN="PLAY_AGAIN",e.RESET_BOARD="RESET_BOARD",e.SET_BOARD_SIZE="SET_BOARD_SIZE",e.PAUSE="PAUSE",e.SET_NUMBER_OF_BOMB="SET_NUMBER_OF_BOMB",e.SET_MAX_PLAYER="SET_MAX_PLAYER",e.GET_CURRENT_PLAYER="GET_CURRENT_PLAYER",e.SET_PLAYER_NAME="SET_PLAYER_NAME"}(n||(n={}));var g=n;function R(){var e=Object(E.useState)(""),t=Object(l.a)(e,2),a=t[0],n=t[1],o=Object(E.useContext)(O).emitEvent;return r.a.createElement(u.a,{width:"full",height:"100%",align:"center",position:"absolute",justifyContent:"center",bg:"gray.50"},r.a.createElement(A.a,{p:10,bg:"white",borderRadius:10,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},r.a.createElement(A.a,{textAlign:"center"},r.a.createElement(m.a,null,"Mine Sweeper")),r.a.createElement(A.a,{my:4,textAlign:"left",justifyItems:"center"},r.a.createElement(_.a,{onSubmit:function(){}},r.a.createElement(s.a,{mb:"2"},"Enter your name:"),r.a.createElement(C.a,{type:"text",placeholder:"Ex: John",variant:"outline",value:a,onChange:function(e){n(e.target.value)}})),r.a.createElement(i.b,{to:"create",style:{textDecoration:"none"}},r.a.createElement(d.a,{width:"full",mt:4,variantColor:"teal",variant:"solid",onClick:function(){console.log("SET_PLAYER_NAME",a),o(g.SET_PLAYER_NAME,a)}},"Continue")))))}var h=a(9),S=Object(E.createContext)({}),f={width:-1,height:-1,id:"",started:!1,noBombs:-1,noBombsFound:-1,currentPlayer:"",players:[],coordinates:[],tick:10,playerJoined:!1},D=function(e,t){for(var a=[],n=0;n<e;n++)for(var E=0;E<t;E++)a.push({x:n,y:E,isBomb:!1,isSelected:!1});return a},y=function(e,t){var a,n,E,r=t.type,o=t.payload;switch(r){case"SET_TICK":return Object(h.a)(Object(h.a)({},e),{},{tick:o});case"SET_GAME_ID":return Object(h.a)(Object(h.a)({},e),{},{id:o});case"INITIALIZE":return Object(h.a)(Object(h.a)({},e),{},{started:!0,width:o.boardWidth,height:o.boardHeight,noBombs:o.numberOfBombs,noBombsFound:o.numberOfBombsFound,players:o.players,coordinates:D(o.boardWidth,o.boardHeight)});case"COORDINATE_FEEDBACK":return Object(h.a)(Object(h.a)({},e),{},{coordinates:(a=e.coordinates,n=o,E=e.width,n.forEach((function(e){a[e.x+e.y*E]=e})),a)});case"PLAYER_JOINED":return Object(h.a)(Object(h.a)({},e),{},{playerJoined:o});case"SET_CURRENT_PLAYER":return Object(h.a)(Object(h.a)({},e),{},{currentPlayer:null===o||""===o?"Anonymous":o});default:return e}},B=function(e){var t=e.children,a=Object(E.useReducer)(y,f),n=Object(l.a)(a,2),o=n[0],c=n[1];return r.a.createElement(S.Provider,{value:{gameState:o,gameDispatch:c}},t)},N=a(131);function x(){for(var e=Object(E.useContext)(S).gameState,t=Object(E.useContext)(O).emitEvent,a=Object(E.useState)(-1),n=Object(l.a)(a,2),o=n[0],c=n[1],i=function(a){console.log("SELECT_COORDINATE",a.target.dataset.x,a.target.dataset.y),c(Number(a.target.dataset.x)+Number(a.target.dataset.y)*e.width),t(g.SELECT_COORDINATE,{x:Number(a.target.dataset.x),y:Number(a.target.dataset.y)})},u=[],m=0;m<36;m++){var _=void 0,s=e.coordinates[m];_=s.isSelected?s.isBomb?"\ud83d\udca3":"\u274c":"\ud83c\udfaf";var C=m%e.width%2===Math.floor(m/e.width)%2?"orange.400":"green.400";u.push(r.a.createElement(A.a,{as:"button",border:"4px",borderColor:o===m?"yellow.300":C,key:m,"data-x":m%e.width,"data-y":Math.floor(m/e.width),w:"35px",h:"35px",bg:C,onClick:i},_))}return r.a.createElement(N.a,{templateColumns:"repeat(".concat(e.width,", 1fr)"),templateRows:"repeat(".concat(e.height,", 1fr)"),w:35*e.width,gap:0,alignItems:"center"},u)}var I=a(132);function M(){var e=Object(E.useContext)(S).gameState,t=Object(E.useContext)(O).socket;return r.a.createElement(u.a,{alignItems:"center",flexDirection:"column"},r.a.createElement(m.a,{mb:4},"Find My Mines"),r.a.createElement(I.a,null,"It is ",e.currentPlayer===t.id?"your":"other player's"," turn."),r.a.createElement(I.a,{mb:4},e.currentPlayer===t.id?"".concat(e.tick," seconds left!"):"Please wait..."))}function j(e){return Object(E.useContext)(S).gameState.started?r.a.createElement(u.a,{width:"full",height:"100%",align:"center",position:"absolute",justifyContent:"center",bg:"gray.50"},r.a.createElement(A.a,{p:10,bg:"white",borderRadius:10,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},r.a.createElement(M,null),r.a.createElement(x,null))):r.a.createElement("div",null,r.a.createElement("h2",null,"Loading..."),r.a.createElement("p",null,"Make sure you create/join game before starting."),r.a.createElement(i.b,{to:"/"},r.a.createElement(d.a,null,"Click me to go back")))}var K=a(6),G=a(27),v=a(136);function F(e){var t=Object(E.useContext)(S).gameState,a=Object(E.useContext)(O).emitEvent;return r.a.createElement(r.a.Fragment,null,t.started?r.a.createElement(K.a,{to:"/play"}):r.a.createElement(u.a,{width:"full",height:"100%",align:"center",position:"absolute",justifyContent:"center",bg:"gray.50"},r.a.createElement(A.a,{p:10,bg:"white",borderRadius:10,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},r.a.createElement(A.a,{textAlign:"center"},r.a.createElement(m.a,null,"Create Game")),r.a.createElement(A.a,{mt:4,textAlign:"left",justifyItems:"center"},r.a.createElement(I.a,{width:"full",mt:"2",fontSize:"md",color:"gray.600",fontWeight:""},""===t.id?"":"ID: ",r.a.createElement("span",{style:{color:"red"}},t.id)),r.a.createElement(d.a,{width:"full",mt:4,variantColor:""===t.id?"teal":"orange",variant:"solid",onClick:""===t.id?function(){a(g.CREATE_GAME,null)}:function(){a(g.START_GAME,null)},fontSize:"sm",isDisabled:""!==t.id&&!0!==t.playerJoined},""===t.id?"Generate Game ID":"Start Game"),r.a.createElement(i.b,{to:"/join"},r.a.createElement(d.a,{width:"full",mt:"2",fontSize:"sm",color:"gray.600"},"Join Game"))))))}function w(e){var t=Object(E.useState)(""),a=Object(l.a)(t,2),n=a[0],o=a[1],c=Object(E.useContext)(S).gameState,b=Object(E.useContext)(O).emitEvent;return r.a.createElement(r.a.Fragment,null,c.started?r.a.createElement(K.a,{to:"/play"}):r.a.createElement(u.a,{width:"full",height:"100%",align:"center",position:"absolute",justifyContent:"center",bg:"gray.50"},r.a.createElement(A.a,{p:10,bg:"white",borderRadius:10,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},r.a.createElement(A.a,{textAlign:"center"},r.a.createElement(m.a,null,"Join Game")),r.a.createElement(A.a,{mt:4,textAlign:"left",justifyItems:"center"},r.a.createElement(_.a,null,r.a.createElement(s.a,{mb:"2"},"Enter Game ID:"),r.a.createElement(C.a,{type:"text",placeholder:"Ex: XRTMK35",variant:"outline",value:n,onChange:function(e){o(e.target.value)}})),r.a.createElement(d.a,{width:"full",mt:4,variantColor:!0===c.playerJoined?"orange":"teal",variant:"solid",onClick:!0===c.playerJoined?function(){b(g.START_GAME,null)}:function(){b(g.JOIN_GAME,n)},fontSize:"sm"},!0===c.playerJoined?"Start Game":"Join Game"),r.a.createElement(i.b,{to:"/create"},r.a.createElement(d.a,{width:"full",mt:"2",fontSize:"sm",color:"gray.600"},"Create game"))))))}var L=a(134),P=Object(h.a)(Object(h.a)({},L.a),{},{colors:Object(h.a)(Object(h.a)({},L.a.colors),{},{accentColor:"#1a365d"})});var Y=function(){var e=Object(E.useContext)(S).gameDispatch,t=Object(E.useContext)(O).socket;return Object(E.useEffect)((function(){t&&function(e,t){e.on(g.CREATE_GAME_FEEDBACK,(function(e){console.log("CREATE_GAME_FEEDBACK",e),console.log("Game ID: ",e.data.gameID),t({type:"SET_GAME_ID",payload:e.data.gameID})})),e.on(g.TICK,(function(e){t({type:"SET_TICK",payload:e})})),e.on(g.JOIN_GAME_FEEDBACK,(function(e){console.log("JOIN_GAME_FEEDBACK",e),t({type:"PLAYER_JOINED",payload:e.isOK})})),e.on(g.GAME_STATE_CHANGED,(function(e){console.log(e)})),e.on(g.START_GAME_FEEDBACK,(function(e){console.log("START_GAME_FEEDBACK",e),e.isOK&&t({type:"INITIALIZE",payload:e.data})})),e.on(g.NEXT_PLAYER,(function(e){console.log("NEXT_PLAYER",e),t({type:"SET_CURRENT_PLAYER",payload:e.id})})),e.on(g.SELECT_COORDINATE_FEEDBACK,(function(e){console.log("SELECT_COORDINATE_FEEDBACK",e),e.isOK&&t({type:"COORDINATE_FEEDBACK",payload:e.data.selectedCoordinates})})),e.on(g.SET_PLAYER_NAME_FEEDBACK,(function(e){console.log("SET_PLAYER_NAME_FEEDBACK",e)}))}(t,e)}),[t,e]),r.a.createElement("div",null,r.a.createElement(i.a,{basename:"/"},r.a.createElement(G.a,{theme:P},r.a.createElement(v.a,null),r.a.createElement(K.d,null,r.a.createElement(K.b,{exact:!0,path:"/"},r.a.createElement(R,null)),r.a.createElement(K.b,{path:"/play"},r.a.createElement(j,null)),r.a.createElement(K.d,null,r.a.createElement(K.b,{path:"/create"},r.a.createElement(F,null)),r.a.createElement(K.b,{path:"/join"},r.a.createElement(w,null)),r.a.createElement(K.b,{path:"/quick-game"},"Quick Game"))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(B,null,r.a.createElement(p,null,r.a.createElement(Y,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},77:function(e,t,a){e.exports=a(126)},82:function(e,t,a){},83:function(e,t,a){}},[[77,1,2]]]);
//# sourceMappingURL=main.ef476ebc.chunk.js.map