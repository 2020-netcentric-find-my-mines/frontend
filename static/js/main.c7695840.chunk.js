(this["webpackJsonpfind-my-mines"]=this["webpackJsonpfind-my-mines"]||[]).push([[0],{104:function(e,t,a){},105:function(e,t,a){},134:function(e,t){},169:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),c=a(90),o=a.n(c),E=(a(104),a(105),a(10)),i=a(14),u=a(22),s=a(171),m=a(4),d=a(172),A=a(42),b=a(173),g=a(179),_=a(60),h=a(7),p=Object(r.createContext)({}),C={width:-1,height:-1,id:"",started:!1,noBombs:-1,noBombsFound:-1,currentPlayer:"",name:"",players:[],coordinates:[],tick:10,playerJoined:!1},f=function(e,t){for(var a=[],n=0;n<e;n++)for(var r=0;r<t;r++)a.push({x:n,y:r,isBomb:!1,isSelected:!1});return a},O=function(e,t){var a,n,r,l=t.type,c=t.payload;switch(l){case"SET_TICK":return Object(h.a)(Object(h.a)({},e),{},{tick:c});case"SET_GAME_ID":return Object(h.a)(Object(h.a)({},e),{},{id:c});case"INITIALIZE":return Object(h.a)(Object(h.a)({},e),{},{started:!0,width:c.boardWidth,height:c.boardHeight,noBombs:c.numberOfBombs,noBombsFound:c.numberOfBombsFound,players:c.players,coordinates:f(c.boardWidth,c.boardHeight)});case"COORDINATE_FEEDBACK":return Object(h.a)(Object(h.a)({},e),{},{coordinates:(a=e.coordinates,n=c,r=e.width,n.forEach((function(e){a[e.x+e.y*r]=e})),a)});case"PLAYER_JOINED":return Object(h.a)(Object(h.a)({},e),{},{playerJoined:c});case"SET_CURRENT_PLAYER":return Object(h.a)(Object(h.a)({},e),{},{currentPlayer:null===c||""===c?"Anonymous":c});case"SET_PLAYER_NAME":return Object(h.a)(Object(h.a)({},e),{},{name:null===c||""===c?"Anonymous":c});default:return e}},T=function(e){var t=e.children,a=Object(r.useReducer)(O,C),n=Object(E.a)(a,2),c=n[0],o=n[1];return l.a.createElement(p.Provider,{value:{gameState:c,gameDispatch:o}},t)},y=a(93),R=a.n(y),S=Object(r.createContext)({}),x=function(e){var t=e.children,a=Object(r.useState)(R()(("https://netcentric-architecture.herokuapp.com/","https://netcentric-architecture.herokuapp.com/"))),n=Object(E.a)(a,1)[0];return l.a.createElement(S.Provider,{value:{socket:n,emitEvent:function(e,t){n.emit(e,t)}}},t)};!function(e){e.CONNECTION="connection",e.DISCONNECT="disconnect",e.TICK="TICK",e.NEXT_PLAYER="NEXT_PLAYER",e.COORDINATED_SELECTED="COORDINATED_SELECTED",e.WINNER="WINNER",e.GAME_STATE_CHANGED="GAME_STATE_CHANGED",e.CURRENT_PLAYER="CURRENT_PLAYER",e.SELECT_COORDINATE_FEEDBACK="SELECT_COORDINATE_FEEDBACK",e.CREATE_GAME_FEEDBACK="CREATE_GAME_FEEDBACK",e.JOIN_GAME_FEEDBACK="JOIN_GAME_FEEDBACK",e.QUICK_MATCH_FEEDBACK="QUICK_MATCH_FEEDBACK",e.START_GAME_FEEDBACK="START_GAME_FEEDBACK",e.PLAY_AGAIN_FEEDBACK="PLAY_AGAIN_FEEDBACK",e.RESET_BOARD_FEEDBACK="RESET_BOARD_FEEDBACK",e.SET_BOARD_SIZE_FEEDBACK="SET_BOARD_SIZE_FEEDBACK",e.PAUSE_FEEDBACK="PAUSE_FEEDBACK",e.SET_NUMBER_OF_BOMB_FEEDBACK="SET_NUMBER_OF_BOMB_FEEDBACK",e.SET_MAX_PLAYER_FEEDBACK="SET_MAX_PLAYER_FEEDBACK",e.GET_CURRENT_PLAYER_FEEDBACK="GET_CURRENT_PLAYER_FEEDBACK",e.SET_PLAYER_NAME_FEEDBACK="SET_PLAYER_NAME_FEEDBACK",e.SELECT_COORDINATE="SELECT_COORDINATE",e.CREATE_GAME="CREATE_GAME",e.JOIN_GAME="JOIN_GAME",e.QUICK_MATCH="QUICK_MATCH",e.START_GAME="START_GAME",e.PLAY_AGAIN="PLAY_AGAIN",e.RESET_BOARD="RESET_BOARD",e.SET_BOARD_SIZE="SET_BOARD_SIZE",e.PAUSE="PAUSE",e.SET_NUMBER_OF_BOMB="SET_NUMBER_OF_BOMB",e.SET_MAX_PLAYER="SET_MAX_PLAYER",e.GET_CURRENT_PLAYER="GET_CURRENT_PLAYER",e.SET_PLAYER_NAME="SET_PLAYER_NAME"}(n||(n={}));var j=n;function D(){var e=Object(r.useState)(""),t=Object(E.a)(e,2),a=t[0],n=t[1],c=Object(r.useContext)(p).gameDispatch,o=Object(r.useContext)(S).emitEvent,h=Object(u.b)().colorMode;return l.a.createElement(s.a,{width:"full",height:"100%",align:"center",position:"absolute",justifyContent:"center",bg:"light"===h?"gray.50":"gray.700"},l.a.createElement(m.a,{p:10,bg:"light"===h?"white":"gray.600",borderRadius:10,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},l.a.createElement(m.a,{textAlign:"center"},l.a.createElement(d.a,null,"Mine Sweeper")),l.a.createElement(m.a,{my:4,textAlign:"left",justifyItems:"center"},l.a.createElement(A.a,null,l.a.createElement(b.a,{mb:"2"},"Enter your name:"),l.a.createElement(g.a,{type:"text",placeholder:"Ex: John",variant:"outline",value:a,onChange:function(e){n(e.target.value)}})),l.a.createElement(i.b,{to:"create",style:{textDecoration:"none"}},l.a.createElement(_.a,{width:"full",mt:4,variantColor:"teal",variant:"solid",onClick:function(){console.log("SET_PLAYER_NAME",a),c({type:"SET_PLAYER_NAME",payload:a}),o(j.SET_PLAYER_NAME,a)}},"Continue")),l.a.createElement(i.b,{to:"/leaderboard"},l.a.createElement(_.a,{width:"full",mt:"2",fontSize:"sm",color:"gray.600"},"Leaderboard")))))}var B=a(177),I=a(174);function v(){for(var e=Object(r.useContext)(p).gameState,t=Object(r.useContext)(S).emitEvent,a=Object(u.b)().colorMode,n=function(e){console.log("SELECT_COORDINATE",e.target.dataset.x,e.target.dataset.y),t(j.SELECT_COORDINATE,{x:Number(e.target.dataset.x),y:Number(e.target.dataset.y)})},c=[],o=0;o<e.width*e.height;o++){var E=void 0,i=e.coordinates[o];E=i.isSelected?i.isBomb?"\ud83d\udca3":"\u274c":"\ud83c\udfaf";var d=o%e.width%2===Math.floor(o/e.width)%2?"orange.200":"green.200";c.push(l.a.createElement(m.a,{as:"button",border:"4px",borderColor:d,key:o,"data-x":o%e.width,"data-y":Math.floor(o/e.width),width:"50px",height:"50px",bg:d,onClick:n},E))}return l.a.createElement(s.a,{width:"full",height:"100%",align:"center",justifyContent:"center"},l.a.createElement(I.a,{templateColumns:"repeat(".concat(e.width,", 1fr)"),templateRows:"repeat(".concat(e.height,", 1fr)"),border:"4px",borderColor:"light"===a?"gray.200":"gray.700",w:50*e.width+8,h:50*e.width+8,gap:0},c))}var M=a(175);function N(){var e=Object(r.useContext)(p).gameState,t=Object(r.useContext)(S).socket;return l.a.createElement(s.a,{alignItems:"center",flexDirection:"column"},l.a.createElement(d.a,{mb:4},"Find My Mines"),l.a.createElement(M.a,null,"It is ",e.currentPlayer===t.id?"your":"other player's"," turn."),l.a.createElement(M.a,null,e.currentPlayer===t.id?"".concat(e.tick," seconds left!"):"Please wait..."),l.a.createElement(M.a,{mb:4},"Player: ",e.name))}var w=a(46),K=a.n(w),L=a(176),G=a(58);a(164);G.initializeApp({apiKey:"AIzaSyBXZqXbdMLXf-lfNVaaRf7FTyS1khV_6yY",authDomain:"findmymines.firebaseapp.com",databaseURL:"https://findmymines.firebaseio.com",projectId:"findmymines",storageBucket:"findmymines.appspot.com",messagingSenderId:"1082480748111"});var F=G,k=a(97),P=a.n(k);function Y(){var e=Object(r.useState)(""),t=Object(E.a)(e,2),a=t[0],n=t[1],c=Object(r.useContext)(p).gameState,o=Object(r.useState)([]),i=Object(E.a)(o,2),u=i[0],m=i[1],d=Object(r.useContext)(S).socket,b=Object(r.useCallback)((function(){console.log(c.id),F.database().ref("games/"+c.id).on("value",(function(e){var t=e.val();if(null!==t){var a=[];Object.keys(t).forEach((function(e){a.push({username:t[e].username,message:t[e].message})})),m(a)}}),(function(){console.log("Error")}))}),[c.id]);Object(r.useEffect)((function(){b()}),[b]);var _=[],h=0;return u.forEach((function(e){return _.push(l.a.createElement(M.a,{key:h++},e.username," : ",e.message))})),l.a.createElement(s.a,{direction:"column"},_,l.a.createElement(A.a,null,l.a.createElement(g.a,{placeholder:"Chat...",value:a,onChange:function(e){n(e.target.value)}}),l.a.createElement(L.a,{"aria-label":"Send chat",icon:"check",size:"sm",onClick:function(){console.log(c.id,c.name),n(""),K.a.post("https://asia-southeast2-findmymines.cloudfunctions.net/addChatMessage/",P.a.stringify({message:a,uid:d.id,username:c.name}),{params:{gameId:c.id},headers:{"Content-Type":"application/x-www-form-urlencoded"}})}})))}function J(){var e=Object(r.useContext)(p).gameState,t=Object(u.b)().colorMode;return e.started?l.a.createElement(s.a,{width:"full",height:"100%",align:"center",position:"absolute",justifyContent:"center",bg:"light"===t?"gray.50":"gray.700"},l.a.createElement(m.a,{p:10,bg:"light"===t?"white":"gray.600",borderRadius:10,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",alignItems:"center",justifyContent:"center"},l.a.createElement(s.a,null,l.a.createElement(s.a,{direction:"column"},l.a.createElement(N,null),l.a.createElement(v,null)),l.a.createElement(B.a,{orientation:"vertical"}),l.a.createElement(Y,null)))):l.a.createElement("div",null,l.a.createElement("h2",null,"Loading..."),l.a.createElement("p",null,"Make sure you create/join game before starting."),l.a.createElement(i.b,{to:"/"},l.a.createElement(_.a,null,"Click me to go back")))}var U=a(8),W=a(29),X=a(180);function z(){var e=Object(r.useContext)(p).gameState,t=Object(r.useContext)(S).emitEvent,a=Object(r.useState)(!1),n=Object(E.a)(a,2),c=n[0],o=n[1],A=Object(u.b)().colorMode;return l.a.createElement(l.a.Fragment,null,e.started?l.a.createElement(U.a,{to:"/play"}):l.a.createElement(s.a,{width:"full",height:"100%",align:"center",position:"absolute",justifyContent:"center",bg:"light"===A?"gray.50":"gray.700"},l.a.createElement(m.a,{p:10,bg:"light"===A?"white":"gray.600",borderRadius:10,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},l.a.createElement(m.a,{textAlign:"center"},l.a.createElement(d.a,null,"Create Game")),l.a.createElement(m.a,{mt:4,textAlign:"left",justifyItems:"center"},l.a.createElement(M.a,{width:"full",mt:"2",fontSize:"md",color:"light"===A?"gray.600":"gray.100",fontWeight:""},""===e.id?"":"ID: ",l.a.createElement("span",{style:{color:"red"}},e.id)),l.a.createElement(_.a,{isLoading:c,loadingText:"Starting...",width:"full",mt:4,variantColor:""===e.id?"teal":"orange",variant:"solid",onClick:""===e.id?function(){t(j.CREATE_GAME,null)}:function(){o(!0),t(j.START_GAME,null)},fontSize:"sm",isDisabled:""!==e.id&&!0!==e.playerJoined},""===e.id?"Generate Game ID":"Start Game"),l.a.createElement(i.b,{to:"/join"},l.a.createElement(_.a,{isLoading:c,width:"full",mt:"2",fontSize:"sm",color:"light"===A?"gray.600":"gray.300"},"Join Game"))))))}function H(){var e=Object(r.useState)(""),t=Object(E.a)(e,2),a=t[0],n=t[1],c=Object(r.useContext)(p).gameState,o=Object(r.useContext)(S).emitEvent,h=Object(r.useState)(!1),C=Object(E.a)(h,2),f=C[0],O=C[1],T=Object(u.b)().colorMode;return l.a.createElement(l.a.Fragment,null,c.started?l.a.createElement(U.a,{to:"/play"}):l.a.createElement(s.a,{width:"full",height:"100%",align:"center",position:"absolute",justifyContent:"center",bg:"light"===T?"gray.50":"gray.700"},l.a.createElement(m.a,{p:10,bg:"light"===T?"white":"gray.600",borderRadius:10,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},l.a.createElement(m.a,{textAlign:"center"},l.a.createElement(d.a,null,"Join Game")),l.a.createElement(m.a,{mt:4,textAlign:"left",justifyItems:"center"},l.a.createElement(A.a,null,l.a.createElement(b.a,{mb:"2"},"Enter Game ID:"),l.a.createElement(g.a,{type:"text",placeholder:"Ex: XRTMK35",variant:"outline",value:a,onChange:function(e){n(e.target.value)}})),l.a.createElement(_.a,{isLoading:f,loadingText:"Starting...",width:"full",mt:4,variantColor:!0===c.playerJoined?"orange":"teal",variant:"solid",onClick:!0===c.playerJoined?function(){O(!0),o(j.START_GAME,null)}:function(){o(j.JOIN_GAME,a)},fontSize:"sm"},!0===c.playerJoined?"Start Game":"Join Game"),l.a.createElement(i.b,{to:"/create"},l.a.createElement(_.a,{isLoading:f,width:"full",mt:"2",fontSize:"sm",color:"light"===T?"gray.600":"gray.300"},"Create game"))))))}var Z=a(32),Q=a.n(Z),q=a(59),V=a(98);function $(){var e={email:"-",gamesWonWeek:0,firstname:"-",lastname:"-",username:"-",createdAt:{_seconds:0,_nanoseconds:0},gamesWonDay:0,totalGamesWon:0},t=Object(r.useState)(!0),a=Object(E.a)(t,2),n=a[0],c=a[1],o=Object(r.useRef)({allTime:[e],week:[e],day:[e]});function u(e){return A.apply(this,arguments)}function A(){return(A=Object(q.a)(Q.a.mark((function e(t){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("allTime"===t||"week"===t||"day"===t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,K.a.get("https://asia-southeast2-findmymines.cloudfunctions.net/getTopScorers",{params:{numOfPlayers:1,timeRange:t}}).then((function(e){console.log(e);var a=e.data;a.isOk&&(o.current[t]=a.topPlayers)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var b=Object(r.useCallback)(Object(q.a)(Q.a.mark((function e(){return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u("allTime");case 2:return e.next=4,u("week");case 4:return e.next=6,u("day");case 6:c(!1);case 7:case"end":return e.stop()}}),e)}))),[]);Object(r.useEffect)((function(){b()}),[b]);var g=l.a.createElement(s.a,{direction:"column",justify:"center",alignItems:"center"},l.a.createElement(d.a,{as:"h4"},"All Time"),l.a.createElement(M.a,null,o.current.allTime[0].username," : ",o.current.allTime[0].totalGamesWon," Wins"),l.a.createElement(M.a,null,o.current.allTime[0].email),l.a.createElement(B.a,null),l.a.createElement(d.a,{as:"h4"},"Week"),l.a.createElement(M.a,null,o.current.week[0].username," : ",o.current.week[0].gamesWonWeek," Wins"),l.a.createElement(M.a,null,o.current.week[0].email),l.a.createElement(B.a,null),l.a.createElement(d.a,{as:"h4"},"Day"),l.a.createElement(M.a,null,o.current.day[0].username," : ",o.current.day[0].gamesWonDay," Wins"),l.a.createElement(M.a,null,o.current.day[0].email),l.a.createElement(B.a,null),l.a.createElement(i.b,{to:"/"},l.a.createElement(_.a,{width:"full",mt:"2",fontSize:"sm",color:"gray.600"},"Back")));return l.a.createElement(s.a,{width:"full",height:"100%",align:"center",position:"absolute",justifyContent:"center",bg:"gray.50"},l.a.createElement(m.a,{p:10,bg:"white",borderRadius:10,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},n?l.a.createElement(V.a,null):g))}var ee=a(178),te=Object(h.a)(Object(h.a)({},ee.a),{},{colors:Object(h.a)(Object(h.a)({},ee.a.colors),{},{accentColor:"#1a365d"}),borders:Object(h.a)(Object(h.a)({},ee.a.borders),{},{"8px":8})});var ae=function(){var e=Object(r.useContext)(p).gameDispatch,t=Object(r.useContext)(S).socket;return Object(r.useEffect)((function(){t&&function(e,t){e.on(j.CREATE_GAME_FEEDBACK,(function(e){console.log("CREATE_GAME_FEEDBACK",e),t({type:"SET_GAME_ID",payload:e.data.gameID})})),e.on(j.TICK,(function(e){t({type:"SET_TICK",payload:e})})),e.on(j.JOIN_GAME_FEEDBACK,(function(e){console.log("JOIN_GAME_FEEDBACK",e),t({type:"PLAYER_JOINED",payload:e.isOK})})),e.on(j.START_GAME_FEEDBACK,(function(e){console.log("START_GAME_FEEDBACK",e),e.isOK&&t({type:"INITIALIZE",payload:e.data})})),e.on(j.NEXT_PLAYER,(function(e){console.log("NEXT_PLAYER",e),t({type:"SET_CURRENT_PLAYER",payload:e.id})})),e.on(j.SELECT_COORDINATE_FEEDBACK,(function(e){console.log("SELECT_COORDINATE_FEEDBACK",e),e.isOK&&t({type:"COORDINATE_FEEDBACK",payload:e.data.selectedCoordinates})}))}(t,e)}),[t,e]),l.a.createElement("div",null,l.a.createElement(i.a,{basename:"/"},l.a.createElement(W.a,{theme:te},l.a.createElement(u.a,null,l.a.createElement(X.a,null),l.a.createElement(U.d,null,l.a.createElement(U.b,{exact:!0,path:"/"},l.a.createElement(D,null)),l.a.createElement(U.b,{path:"/play"},l.a.createElement(J,null)),l.a.createElement(U.d,null,l.a.createElement(U.b,{path:"/create"},l.a.createElement(z,null)),l.a.createElement(U.b,{path:"/join"},l.a.createElement(H,null)),l.a.createElement(U.b,{path:"/quick-game"},"Quick Game"),l.a.createElement(U.b,{path:"/leaderboard"},l.a.createElement($,null))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(T,null,l.a.createElement(x,null,l.a.createElement(ae,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},99:function(e,t,a){e.exports=a(169)}},[[99,1,2]]]);
//# sourceMappingURL=main.c7695840.chunk.js.map