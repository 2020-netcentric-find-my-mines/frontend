(this["webpackJsonpfind-my-mines"]=this["webpackJsonpfind-my-mines"]||[]).push([[0],{119:function(e,t,a){e.exports=a(206)},124:function(e,t,a){},125:function(e,t,a){},154:function(e,t){},206:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),o=a(31),c=a.n(o),i=(a(124),a(125),a(8)),E=a(13),s=a(15),u=a(219),m=a(72),d=a(4),g=a(212),b=a(59),p=a(213),h=a(60),A=a(214),_=a(73),f=a(77),y=a(5),C=Object(r.createContext)({}),O={width:-1,height:-1,id:"",started:!1,noBombs:-1,noBombsFound:-1,currentPlayer:"",currentPlayerName:"",name:"",players:[],coordinates:[],tick:10,playerJoined:!1,showWinnerModal:!1,winner:[],firstToast:!0},T=function(e,t){for(var a=[],n=0;n<e;n++)for(var r=0;r<t;r++)a.push({x:n,y:r,isBomb:!1,isSelected:!1});return a},R=function(e,t){var a,n,r,l=t.type,o=t.payload;switch(l){case"SET_TICK":return Object(y.a)(Object(y.a)({},e),{},{tick:o});case"WINNER":return Object(y.a)(Object(y.a)({},e),{},{winner:o});case"TOASTED":return Object(y.a)(Object(y.a)({},e),{},{firstToast:!1});case"SET_GAME_ID":return Object(y.a)(Object(y.a)({},e),{},{id:o});case"SHOW_WINNER":return Object(y.a)(Object(y.a)({},e),{},{showWinnerModal:o});case"RESET_BOARD":return e.players.map((function(e){return e.score=0})),Object(y.a)(Object(y.a)({},e),{},{coordinates:T(e.width,e.height),players:o.players});case"INITIALIZE":return Object(y.a)(Object(y.a)({},e),{},{id:o.gameID,started:!0,width:o.boardWidth,height:o.boardHeight,noBombs:o.numberOfBombs,noBombsFound:o.numberOfBombsFound,players:o.players,coordinates:T(o.boardWidth,o.boardHeight)});case"COORDINATE_FEEDBACK":return Object(y.a)(Object(y.a)({},e),{},{coordinates:(a=e.coordinates,n=o,r=e.width,n.forEach((function(e){a[e.x+e.y*r]=e})),a)});case"PLAYER_JOINED":return Object(y.a)(Object(y.a)({},e),{},{playerJoined:o});case"SET_CURRENT_PLAYER":return Object(y.a)(Object(y.a)({},e),{},{currentPlayer:o.id,currentPlayerName:null===o.name||""===o.name?"Anonymous":o.name});case"SET_PLAYER_NAME":return Object(y.a)(Object(y.a)({},e),{},{name:null===o||""===o?"Anonymous":o});case"SET_PLAYERS":case"UPDATE_PLAYERS_SCORE":return Object(y.a)(Object(y.a)({},e),{},{players:o});case"MEMBER_JOINED":var c=e.players;return"player"===o.type&&c.push(o),Object(y.a)(Object(y.a)({},e),{},{players:c});case"MEMBER_LEFT":var i="player"===o.type?e.players.filter((function(e){return e.id!==o.id})):e.players;return Object(y.a)(Object(y.a)({},e),{},{players:i});case"MEMBER_CHANGED":if("player"===o.newType){var E=e.players;return E.push(o.member),Object(y.a)(Object(y.a)({},e),{},{players:E})}if("spectator"===o.newType){var s="player"===o.type?e.players.filter((function(e){return e.id!==o.id})):e.players;return Object(y.a)(Object(y.a)({},e),{},{players:s})}return e;case"LEAVE_GAME":return Object(y.a)(Object(y.a)({},e),{},{id:"",started:!1,playerJoined:!1,showWinnerModal:!1,winner:[],players:[]});default:return e}},S=function(e){var t=e.children,a=Object(r.useReducer)(R,O),n=Object(i.a)(a,2),o=n[0],c=n[1];return l.a.createElement(C.Provider,{value:{gameState:o,gameDispatch:c}},t)},M=a(112),j=a.n(M),D=Object(r.createContext)({}),B=function(e){var t=e.children,a=Object(r.useState)(j()(("https://netcentric-architecture.herokuapp.com/","https://netcentric-architecture.herokuapp.com/"))),n=Object(i.a)(a,1)[0];return l.a.createElement(D.Provider,{value:{socket:n,emitEvent:function(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),r=1;r<t;r++)a[r-1]=arguments[r];n.emit.apply(n,[e].concat(a))}}},t)};!function(e){e.CONNECTION="connection",e.DISCONNECT="disconnect",e.TICK="TICK",e.NEXT_PLAYER="NEXT_PLAYER",e.COORDINATED_SELECTED="COORDINATED_SELECTED",e.WINNER="WINNER",e.GAME_STATE_CHANGED="GAME_STATE_CHANGED",e.CURRENT_PLAYER="CURRENT_PLAYER",e.MEMBER_JOINED_GAME="MEMBER_JOINED_GAME",e.MEMBER_LEFT_GAME="MEMBER_LEFT_GAME",e.MEMBER_CHANGED_TYPE="MEMBER_CHANGED_TYPE",e.SELECT_COORDINATE_FEEDBACK="SELECT_COORDINATE_FEEDBACK",e.CREATE_GAME_FEEDBACK="CREATE_GAME_FEEDBACK",e.JOIN_GAME_FEEDBACK="JOIN_GAME_FEEDBACK",e.LEAVE_GAME_FEEDBACK="LEAVE_GAME_FEEDBACK",e.QUICK_MATCH_FEEDBACK="QUICK_MATCH_FEEDBACK",e.START_GAME_FEEDBACK="START_GAME_FEEDBACK",e.PLAY_AGAIN_FEEDBACK="PLAY_AGAIN_FEEDBACK",e.RESET_BOARD_FEEDBACK="RESET_BOARD_FEEDBACK",e.SET_BOARD_SIZE_FEEDBACK="SET_BOARD_SIZE_FEEDBACK",e.PAUSE_FEEDBACK="PAUSE_FEEDBACK",e.CHANGE_PLAYER_TYPE_FEEDBACK="CHANGE_PLAYER_TYPE_FEEDBACK",e.SET_NUMBER_OF_BOMB_FEEDBACK="SET_NUMBER_OF_BOMB_FEEDBACK",e.SET_MAX_PLAYER_FEEDBACK="SET_MAX_PLAYER_FEEDBACK",e.GET_CURRENT_PLAYER_FEEDBACK="GET_CURRENT_PLAYER_FEEDBACK",e.SET_PLAYER_NAME_FEEDBACK="SET_PLAYER_NAME_FEEDBACK",e.SELECT_COORDINATE="SELECT_COORDINATE",e.CREATE_GAME="CREATE_GAME",e.JOIN_GAME="JOIN_GAME",e.LEAVE_GAME="LEAVE_GAME",e.QUICK_MATCH="QUICK_MATCH",e.START_GAME="START_GAME",e.PLAY_AGAIN="PLAY_AGAIN",e.RESET_BOARD="RESET_BOARD",e.SET_BOARD_SIZE="SET_BOARD_SIZE",e.PAUSE="PAUSE",e.CHANGE_PLAYER_TYPE="CHANGE_PLAYER_TYPE",e.SET_NUMBER_OF_BOMB="SET_NUMBER_OF_BOMB",e.SET_MAX_PLAYER="SET_MAX_PLAYER",e.GET_CURRENT_PLAYER="GET_CURRENT_PLAYER",e.SET_PLAYER_NAME="SET_PLAYER_NAME"}(n||(n={}));var x=n,v=a(71);a(157),a(159);v.initializeApp({apiKey:"AIzaSyBXZqXbdMLXf-lfNVaaRf7FTyS1khV_6yY",authDomain:"findmymines.firebaseapp.com",databaseURL:"https://findmymines.firebaseio.com",projectId:"findmymines",storageBucket:"findmymines.appspot.com",messagingSenderId:"1082480748111"});var w=v;function N(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)(""),c=Object(i.a)(o,2),y=c[0],O=c[1],T=Object(r.useState)(""),R=Object(i.a)(T,2),S=R[0],M=R[1],j=Object(r.useState)(!1),B=Object(i.a)(j,2),v=B[0],N=B[1],I=Object(r.useContext)(C),L=I.gameState,P=I.gameDispatch,G=Object(r.useContext)(D).emitEvent,F=Object(s.b)(),K=F.colorMode,k=F.toggleColorMode,Y=Object(u.a)();function W(e){"name"===e.target.name?n(e.target.value):"email"===e.target.name?O(e.target.value):"password"===e.target.name&&M(e.target.value)}return Object(r.useEffect)((function(){L.firstToast&&(Y({title:"Welcome to Find My Mines",description:"Have a great day!",status:"success",position:"top",duration:3e3,isClosable:!0}),P({type:"TOASTED",payload:null}))}),[Y,L,P]),l.a.createElement(m.a,{width:"full",height:"100%",align:"center",minHeight:"100vh",justifyContent:"center",bg:"light"===K?"gray.50":"gray.700"},l.a.createElement(d.a,{p:10,bg:"light"===K?"white":"gray.600",borderRadius:10,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},l.a.createElement(d.a,{textAlign:"center"},l.a.createElement(g.a,null,"Mine Sweeper")),l.a.createElement(d.a,{my:4,textAlign:"left",justifyItems:"center"},l.a.createElement(b.a,null,l.a.createElement(p.a,null,"Name:"),l.a.createElement(h.a,{mb:"3",name:"name",type:"text",placeholder:"Ex: John",variant:"outline",value:a,onChange:W})),l.a.createElement(b.a,null,l.a.createElement(p.a,null,"Email:"),l.a.createElement(h.a,{mb:"3",type:"text",name:"email",placeholder:"Leave blank for guest",variant:"outline",value:y,onChange:W})),l.a.createElement(b.a,null,l.a.createElement(p.a,null,"Password:"),l.a.createElement(A.a,null,l.a.createElement(h.a,{type:v?"text":"password",name:"password",placeholder:"Leave blank for guest",variant:"outline",value:S,onChange:W}),l.a.createElement(_.b,{width:"4.5rem"},l.a.createElement(f.a,{h:"1.75rem",size:"sm",onClick:function(){return N(!v)}},v?"Hide":"Show")))),l.a.createElement(E.b,{to:"create",style:{textDecoration:"none"}},l.a.createElement(f.a,{width:"full",mt:4,variantColor:"teal",variant:"solid",isDisabled:""===a,onClick:function(){console.log("SET_PLAYER_NAME",a),P({type:"SET_PLAYER_NAME",payload:a}),""!==y&&null!==y&&""!==S&&null!==S&&w.auth().signInWithEmailAndPassword(y,S).then((function(){Y({title:"Sign in completed",description:"Thank you for being a part of Find My Mines!",status:"success",position:"top",duration:5e3,isClosable:!0})})).catch((function(e){console.log("Register error.",e.code,e.message),Y({title:"Sign in unsuccessful",description:"Please try again later.",status:"error",position:"top",duration:5e3,isClosable:!0})})),G(x.SET_PLAYER_NAME,a)}},"Continue")),l.a.createElement(E.b,{to:"register",style:{textDecoration:"none"}},l.a.createElement(f.a,{width:"full",mt:"2",fontSize:"sm",color:"light"===K?"gray.600":"gray.300"},"Register")),l.a.createElement(E.b,{to:"leaderboard"},l.a.createElement(f.a,{width:"full",mt:"2",fontSize:"sm",color:"light"===K?"gray.600":"gray.300"},"Leaderboard")),l.a.createElement(f.a,{width:"full",mt:"2",fontSize:"sm",color:"light"===K?"gray.600":"gray.300",onClick:k},"Toggle ","light"===K?"Dark":"Light"))))}var I=a(217),L=a(215);function P(){for(var e=Object(r.useContext)(C).gameState,t=Object(r.useContext)(D).emitEvent,a=Object(s.b)().colorMode,n=function(e){console.log("SELECT_COORDINATE",e.target.dataset.x,e.target.dataset.y),t(x.SELECT_COORDINATE,{x:Number(e.target.dataset.x),y:Number(e.target.dataset.y)})},o=[],c=0;c<e.width*e.height;c++){var i=void 0,E=e.coordinates[c];i=E.isSelected?E.isBomb?"\ud83d\udca3":"\u274c":"\ud83c\udfaf";var u=c%e.width%2===Math.floor(c/e.width)%2?"orange.200":"green.200";o.push(l.a.createElement(d.a,{as:"button",border:"4px",borderColor:u,key:c,"data-x":c%e.width,"data-y":Math.floor(c/e.width),width:"50px",height:"50px",bg:u,onClick:n},i))}return l.a.createElement(L.a,{templateColumns:"repeat(".concat(e.width,", 1fr)"),templateRows:"repeat(".concat(e.height,", 1fr)"),border:"4px",borderColor:"light"===a?"gray.200":"gray.700",w:50*e.width+8,h:50*e.width+8,gap:0},o)}var G=a(216);function F(){var e=Object(r.useContext)(C).gameState,t=Object(r.useContext)(D).socket;return l.a.createElement(m.a,{alignItems:"center",flexDirection:"column"},l.a.createElement(g.a,{mb:4},"Find My Mines"),l.a.createElement(G.a,null,"It is"," ",l.a.createElement("span",{style:{color:e.currentPlayer===t.id?"orange":""}},e.currentPlayer===t.id?"YOUR":e.currentPlayerName+"'s")," ","turn."),l.a.createElement(G.a,{mb:4},e.currentPlayer===t.id?"".concat(e.tick," seconds left!"):"Please wait..."))}var K=a(42),k=a.n(K),Y=a(218),W=a(116),U=a.n(W);function z(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),a=t[0],n=t[1],o=Object(r.useContext)(C).gameState,c=Object(r.useState)([]),E=Object(i.a)(c,2),s=E[0],u=E[1],g=Object(r.useContext)(D).socket,p=Object(r.useCallback)((function(){console.log(o.id),w.database().ref("games/"+o.id).on("value",(function(e){var t=e.val();if(null!==t){var a=[];Object.keys(t).forEach((function(e){a.push({username:t[e].username,message:t[e].message})})),u(a)}}),(function(){console.log("Error")}))}),[o.id]);Object(r.useEffect)((function(){p()}),[p]);var A=[],_=0;s.forEach((function(e){return A.push(l.a.createElement(G.a,{key:_++},e.username," : ",e.message))}));var f=A.slice(Math.max(0,A.length-8)),y=[],O=0;return o.players.forEach((function(e){var t;return y.push(l.a.createElement(G.a,null,l.a.createElement("span",{style:{fontWeight:"bold"}},0===(null===(t=e.name)||void 0===t?void 0:t.length)?"Player "+ ++O:e.name,":"," "),l.a.createElement("span",{style:{color:"orange"}},e.score)))})),l.a.createElement(m.a,{direction:"column"},l.a.createElement(d.a,{backgroundColor:"gray",padding:"2"},l.a.createElement(m.a,{fontWeight:"bold",fontSize:"xl",justifyContent:"center",pb:"2"},"Informations"),l.a.createElement(G.a,null,"Game ID: ",l.a.createElement("span",{style:{color:"orange"}},o.id)),l.a.createElement(G.a,{mb:4},"Player: ",l.a.createElement("span",{style:{color:"orange"}},o.name)),l.a.createElement(I.a,{orientation:"horizontal"}),l.a.createElement(m.a,{fontWeight:"bold",fontSize:"xl",justifyContent:"center",pb:"2"},"Scores"),y,l.a.createElement(G.a,{fontWeight:"light",pt:2},"There are ",o.players.length," players online")),l.a.createElement(I.a,{orientation:"horizontal"}),l.a.createElement(d.a,{backgroundColor:"gray",padding:"2"},l.a.createElement(m.a,{fontWeight:"bold",fontSize:"xl",justifyContent:"center",pb:"2"},"Chat"),f,l.a.createElement(b.a,null,l.a.createElement(m.a,{direction:"row",justifyContent:"center",mt:"4"},l.a.createElement(h.a,{placeholder:"Chat...",value:a,onChange:function(e){e.target.value.length<20&&n(e.target.value)}}),l.a.createElement(Y.a,{height:"inherit",width:"inherit",px:"2",marginLeft:"2","aria-label":"Send chat",icon:"check",size:"sm",onClick:function(){console.log(o.id,o.name),""!==a&&null!==a&&(n(""),k.a.post("https://asia-southeast2-findmymines.cloudfunctions.net/addChatMessage/",U.a.stringify({message:a,uid:g.id,username:o.name}),{params:{gameId:o.id},headers:{"Content-Type":"application/x-www-form-urlencoded"}}))}})))))}var H=a(220);function J(){var e=Object(r.useContext)(C),t=e.gameState,a=e.gameDispatch;return l.a.createElement(l.a.Fragment,null,l.a.createElement(H.a,{isOpen:t.showWinnerModal},l.a.createElement(H.f,null),l.a.createElement(H.c,null,l.a.createElement(H.e,null,1===t.winner.length?"Congratulations":"Tie","!"),l.a.createElement(H.b,null,function(){var e=t.winner;if(1===e.length)return"The winner is "+e[0].name+" with a score of "+e[0].score;if(e.length>1){for(var a="",n=0;n<e.length;n++)""!==a&&(a+=", "),a+=e[n].name;return"Tie between "+a+" with a score of "+e[0].score}return""}()," ",l.a.createElement("br",null)," ",l.a.createElement("br",null),function(){for(var e=t.players,a=t.winner,n=a.map((function(e){return e.id})),r=[],o=0;o<e.length;o++)1===a.length?r.push(l.a.createElement(G.a,{fontWeight:n.includes(e[o].id)?"bold":"normal"},n.includes(e[o].id)?"\ud83c\udf89":""," ",e[o].name,":"," ",e[o].score," ",n.includes(e[o].id)?"\ud83c\udf89":""," ",n.includes(e[o].id)?"Winner":"")):r.push(l.a.createElement(G.a,{fontWeight:n.includes(e[o].id)?"bold":"normal"},n.includes(e[o].id)?"\ud83c\udf89":""," ",e[o].name,":"," ",e[o].score," ",n.includes(e[o].id)?"\ud83c\udf89":""," ",n.includes(e[o].id)?"Tie":""));return r}()),l.a.createElement(H.d,null,l.a.createElement(f.a,{variantColor:"blue",mr:3,onClick:function(){a({type:"SHOW_WINNER",payload:!1})}},"Close")))))}function X(){var e=Object(r.useContext)(C),t=e.gameState,a=e.gameDispatch,n=Object(s.b)().colorMode,o=Object(r.useContext)(D).emitEvent;return console.log(w.auth().currentUser),t.started?l.a.createElement(m.a,{width:"full",height:"100%",align:"center",minHeight:"100vh",justifyContent:"center",bg:"light"===n?"gray.50":"gray.700"},l.a.createElement(J,null),l.a.createElement(d.a,{p:10,bg:"light"===n?"white":"gray.600",borderRadius:10,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",alignItems:"center",justifyContent:"center"},l.a.createElement(m.a,{direction:"row"},l.a.createElement(m.a,{direction:"column"},l.a.createElement(F,null),l.a.createElement(m.a,{justifyContent:"center",alignContent:"center"},l.a.createElement(P,null)),l.a.createElement(m.a,{direction:"row",justifyContent:"center",marginTop:"4"},l.a.createElement(f.a,{onClick:function(){console.log(x.RESET_BOARD),0===t.winner.length?o(x.RESET_BOARD,!1):(o(x.RESET_BOARD,!0),a({type:"WINNER",payload:[]}))},padding:"2",marginRight:"2"},0===t.winner.length?"Reset Game":"Play Again"),l.a.createElement(f.a,{onClick:function(){o(x.LEAVE_GAME)},padding:"2"},l.a.createElement(E.b,{to:"/"},"Disconnect")))),l.a.createElement(I.a,{orientation:"vertical"}),l.a.createElement(z,null)))):l.a.createElement("div",null,l.a.createElement("h2",null,"Loading..."),l.a.createElement("p",null,"Make sure you create/join game before starting."),l.a.createElement(E.b,{to:"/"},l.a.createElement(f.a,null,"Click me to go back")))}function V(){var e=Object(s.b)().colorMode,t=Object(r.useState)(""),a=Object(i.a)(t,2),n=a[0],o=a[1],c=Object(r.useState)(""),y=Object(i.a)(c,2),C=y[0],O=y[1],T=Object(r.useState)(!1),R=Object(i.a)(T,2),S=R[0],M=R[1],j=Object(u.a)();function D(e){"email"===e.target.name?o(e.target.value):"password"===e.target.name&&O(e.target.value)}return l.a.createElement(m.a,{width:"full",height:"100%",align:"center",minHeight:"100vh",justifyContent:"center",bg:"light"===e?"gray.50":"gray.700"},l.a.createElement(d.a,{p:10,bg:"light"===e?"white":"gray.600",borderRadius:10,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},l.a.createElement(d.a,{textAlign:"center"},l.a.createElement(g.a,null,"Register")),l.a.createElement(d.a,{mt:4,textAlign:"left",justifyItems:"center"},l.a.createElement(b.a,null,l.a.createElement(p.a,null,"Email:"),l.a.createElement(h.a,{type:"text",name:"email",variant:"outline",value:n,onChange:D,mb:"3"}),l.a.createElement(p.a,null,"Password:"),l.a.createElement(A.a,null,l.a.createElement(h.a,{type:S?"text":"password",name:"password",variant:"outline",value:C,onChange:D}),l.a.createElement(_.b,{width:"4.5rem"},l.a.createElement(f.a,{h:"1.75rem",size:"sm",onClick:function(){return M(!S)}},S?"Hide":"Show")))),l.a.createElement(f.a,{width:"full",mt:4,variantColor:"teal",variant:"solid",onClick:function(){w.auth().createUserWithEmailAndPassword(n,C).then((function(){j({title:"Register completed",description:"Thank you for being a part of Find My Mines!",status:"success",position:"top",duration:5e3,isClosable:!0})})).catch((function(e){console.log("Register error.",e.code,e.message),j({title:"Register unsuccessful",description:"Password must be at least 6 characters and account must not be already registered. Please try again later.",status:"error",position:"top",duration:5e3,isClosable:!0})}))},fontSize:"sm"},"Register"),l.a.createElement(E.b,{to:"/"},l.a.createElement(f.a,{width:"full",mt:"2",fontSize:"sm"},"Back")))))}var Z=a(12),Q=a(18),q=a(223),$=a(222);function ee(){var e=Object(r.useContext)(C).gameState,t=Object(r.useContext)(D).emitEvent,a=Object(r.useState)(!1),n=Object(i.a)(a,2),o=n[0],c=n[1],b=Object(s.b)().colorMode,p=Object(r.useState)(6),h=Object(i.a)(p,2),A=h[0],_=h[1],y=Object(r.useState)(3),O=Object(i.a)(y,2),T=O[0],R=O[1],S=Object(r.useState)(2),M=Object(i.a)(S,2),j=M[0],B=M[1],v=Object(r.useContext)(D).socket,w=Object(u.a)();Object(r.useEffect)((function(){v.on(x.SET_BOARD_SIZE_FEEDBACK,(function(e){console.log("SELECT_BOARD_SIZE_FEEDBACK",e),e.isOK||w({title:"Unable to set board size",description:"This board size is not available.",status:"error",position:"top",duration:2e3,isClosable:!0})})),v.on(x.SET_NUMBER_OF_BOMB_FEEDBACK,(function(e){console.log("SELECT_NUMBER_OF_BOMB_FEEDBACK",e),e.isOK||w({title:"Unable to set bomb number",description:"This bomb number is not available.",status:"error",position:"top",duration:2e3,isClosable:!0})})),v.on(x.SET_MAX_PLAYER_FEEDBACK,(function(e){console.log("SELECT_MAX_PLAYER_FEEDBACK",e),e.isOK||w({title:"Unable to set max players",description:"This number of maximum players is not available.",status:"error",position:"top",duration:2e3,isClosable:!0})}))}),[v,w]);var N=""!==e.id?l.a.createElement(d.a,{width:"full",p:5,m:5,bg:"light"===b?"gray.100":"gray.500",borderRadius:10},l.a.createElement(G.a,{fontSize:"xs",fontWeight:"medium"},"Game ID:"),l.a.createElement(G.a,{py:"1",rounded:"md",fontWeight:"bold",color:"orange.300"},e.id),l.a.createElement(G.a,{mt:"2",fontSize:"xs",fontWeight:"medium"},"Board size:"),l.a.createElement($.c,{step:1,min:2,max:10,value:A,onChange:function(e){_(+e)},rounded:"md",bg:"light"===b?"gray.200":"gray.600"},l.a.createElement($.d,null),l.a.createElement($.e,null,l.a.createElement($.b,null),l.a.createElement($.a,null))),l.a.createElement(G.a,{mt:"2",fontSize:"xs",fontWeight:"medium"},"Bombs:"),l.a.createElement($.c,{step:1,defaultValue:11,min:1,max:20,bg:"light"===b?"gray.200":"gray.600",rounded:"md",value:T,onChange:function(e){R(+e)}},l.a.createElement($.d,null),l.a.createElement($.e,null,l.a.createElement($.b,null),l.a.createElement($.a,null))),l.a.createElement(G.a,{mt:"2",fontSize:"xs",fontWeight:"medium"},"Max players:"),l.a.createElement($.c,{step:1,min:2,max:10,value:j,onChange:function(e){B(+e)},rounded:"md",bg:"light"===b?"gray.200":"gray.600"},l.a.createElement($.d,null),l.a.createElement($.e,null,l.a.createElement($.b,null),l.a.createElement($.a,null))),l.a.createElement(f.a,{mt:"2",color:"light"===b?"black.200":"black.400",width:"full",bg:"light"===b?"gray.200":"gray.600",onClick:function(){t("SET_MAX_PLAYER",j),t("SET_NUMBER_OF_BOMB",T),t("SET_BOARD_SIZE",A,A),w({title:"Notice",description:"The configuration is applied",status:"info",position:"top",duration:1500,isClosable:!0})}},"Apply")):l.a.createElement(l.a.Fragment,null),I=[],L=0;e.players.forEach((function(e){return I.push(l.a.createElement(G.a,{key:L++},""===e.name||null===e.name?"Anonymous":e.name))}));var P=l.a.createElement(d.a,{hidden:0===I.length,width:"full",p:5,m:5,bg:"light"===b?"gray.100":"gray.500",borderRadius:10},l.a.createElement(G.a,{as:"u"},"Players joined:"),I);return l.a.createElement(l.a.Fragment,null,e.started?l.a.createElement(Z.a,{to:"/play"}):l.a.createElement(m.a,{width:"full",height:"100%",align:"center",minHeight:"100vh",justifyContent:"center",bg:"light"===b?"gray.50":"gray.700"},l.a.createElement(d.a,{p:10,bg:"light"===b?"white":"gray.600",borderRadius:10,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},l.a.createElement(d.a,{textAlign:"center"},l.a.createElement(g.a,null,"Create Game")),l.a.createElement(m.a,{direction:"row"},N,P),l.a.createElement(d.a,{textAlign:"left",justifyItems:"center",mt:0===I.length?4:2},l.a.createElement(f.a,{isLoading:o,loadingText:"Starting...",width:"full",variantColor:""===e.id?"teal":"orange",variant:"solid",onClick:""===e.id?function(){t(x.CREATE_GAME,null)}:function(){c(!0),t(x.START_GAME,null)},fontSize:"sm",isDisabled:""!==e.id&&!(e.players.length>1)},""===e.id?"Generate Game ID":"Start Game"),l.a.createElement(E.b,{to:"/join"},l.a.createElement(f.a,{hidden:""!==e.id,isLoading:o,width:"full",mt:"2",fontSize:"sm",color:"light"===b?"gray.600":"gray.300"},"Join Game")),l.a.createElement(E.b,{to:"/"},l.a.createElement(f.a,{width:"full",mt:"2",fontSize:"sm",color:"light"===b?"gray.600":"gray.300",onClick:function(){t(x.LEAVE_GAME)}},"Back"))))))}function te(){var e=Object(r.useState)(""),t=Object(i.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)(!1),c=Object(i.a)(o,2),u=c[0],A=c[1],_=Object(r.useContext)(C).gameState,y=Object(r.useContext)(D).emitEvent,O=Object(r.useState)(!1),T=Object(i.a)(O,2),R=T[0],S=T[1],M=Object(s.b)().colorMode;Object(r.useContext)(D).socket.on(x.JOIN_GAME_FEEDBACK,(function(e){!0===e.isOK&&A(!0)}));var j=[],B=0;_.players.forEach((function(e){return j.push(l.a.createElement(G.a,{key:B++},""===e.name||null===e.name?"Anonymous":e.name))}));var v=l.a.createElement(d.a,{hidden:0===j.length,width:"full",p:5,m:5,bg:"light"===M?"gray.100":"gray.500",borderRadius:10},l.a.createElement(G.a,{as:"u"},"Players joined:"),j);return l.a.createElement(l.a.Fragment,null,_.started?l.a.createElement(Z.a,{to:"/play"}):l.a.createElement(m.a,{width:"full",height:"100%",align:"center",minHeight:"100vh",justifyContent:"center",bg:"light"===M?"gray.50":"gray.700"},l.a.createElement(d.a,{p:10,bg:"light"===M?"white":"gray.600",borderRadius:10,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},l.a.createElement(d.a,{textAlign:"center"},l.a.createElement(g.a,{minWidth:"20rem"},"Join Game")),l.a.createElement(m.a,null,v),l.a.createElement(d.a,{textAlign:"left",justifyItems:"center",mt:0===j.length?2:0},l.a.createElement(b.a,null,l.a.createElement(p.a,{mb:"1"},"Enter Game ID:"),!1===u?l.a.createElement(h.a,{type:"text",placeholder:"Ex: XRTMK35",variant:"outline",value:a,onChange:function(e){n(e.target.value)}}):l.a.createElement(G.a,{color:"orange.400",fontWeight:"bold"},a)),l.a.createElement(f.a,{isLoading:R,loadingText:"Starting...",width:"full",mt:4,variantColor:!0===_.playerJoined?"orange":"teal",variant:"solid",onClick:!0===_.playerJoined?function(){S(!0),y(x.START_GAME,null)}:function(){y(x.JOIN_GAME,a)},fontSize:"sm"},!0===_.playerJoined?"Start Game":"Join Game"),l.a.createElement(E.b,{to:"/create"},l.a.createElement(f.a,{hidden:!0===u,isLoading:R,width:"full",mt:"2",fontSize:"sm",color:"light"===M?"gray.600":"gray.300"},"Create game")),l.a.createElement(E.b,{to:"/"},l.a.createElement(f.a,{width:"full",mt:"2",fontSize:"sm",color:"light"===M?"gray.600":"gray.300",onClick:function(){y(x.LEAVE_GAME)}},"Back"))))))}var ae=a(47),ne=a.n(ae),re=a(76),le=a(118);function oe(){var e={email:"-",gamesWonWeek:0,firstname:"-",lastname:"-",username:"-",createdAt:{_seconds:0,_nanoseconds:0},gamesWonDay:0,totalGamesWon:0},t=Object(s.b)().colorMode,a=Object(r.useState)(!0),n=Object(i.a)(a,2),o=n[0],c=n[1],u=Object(r.useRef)({allTime:[e],week:[e],day:[e]});function b(e){return p.apply(this,arguments)}function p(){return(p=Object(re.a)(ne.a.mark((function e(t){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("allTime"===t||"week"===t||"day"===t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,k.a.get("https://asia-southeast2-findmymines.cloudfunctions.net/getTopScorers",{params:{numOfPlayers:1,timeRange:t}}).then((function(e){console.log(e);var a=e.data;a.isOk&&(u.current[t]=a.topPlayers)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=Object(r.useCallback)(Object(re.a)(ne.a.mark((function e(){return ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b("allTime");case 2:return e.next=4,b("week");case 4:return e.next=6,b("day");case 6:c(!1);case 7:case"end":return e.stop()}}),e)}))),[]);Object(r.useEffect)((function(){h()}),[h]);var A=l.a.createElement(m.a,{direction:"column",justify:"center",alignItems:"center"},l.a.createElement(g.a,{as:"h4",mb:"2"},"All Time"),l.a.createElement(G.a,{color:"gray.400"},u.current.allTime[0].totalGamesWon," Wins"),l.a.createElement(G.a,{fontSize:"xs",color:"gray.400"},u.current.allTime[0].email),l.a.createElement(I.a,null),l.a.createElement(g.a,{as:"h4",mb:"2"},"Weekly"),l.a.createElement(G.a,{color:"gray.400"},u.current.week[0].gamesWonWeek," Wins"),l.a.createElement(G.a,{fontSize:"xs",color:"gray.400"},u.current.week[0].email),l.a.createElement(I.a,null),l.a.createElement(g.a,{as:"h4",mb:"2"},"Daily"),l.a.createElement(G.a,{color:"gray.400"},u.current.day[0].gamesWonDay," Wins"),l.a.createElement(G.a,{fontSize:"xs",color:"gray.400"},u.current.day[0].email),l.a.createElement(I.a,null),l.a.createElement(E.b,{to:"/"},l.a.createElement(f.a,{width:"full",mt:"2",fontSize:"sm"},"Back")));return l.a.createElement(m.a,{width:"full",height:"100%",align:"center",minHeight:"100vh",justifyContent:"center",bg:"light"===t?"gray.50":"gray.700"},l.a.createElement(d.a,{p:10,px:20,bg:"light"===t?"white":"gray.600",borderRadius:10,boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)"},o?l.a.createElement(le.a,null):A))}var ce=a(221),ie=Object(y.a)(Object(y.a)({},ce.a),{},{colors:Object(y.a)(Object(y.a)({},ce.a.colors),{},{accentColor:"#1a365d"}),borders:Object(y.a)(Object(y.a)({},ce.a.borders),{},{"8px":8})});var Ee=function(){var e=Object(r.useContext)(C).gameDispatch,t=Object(r.useContext)(D).socket;return Object(r.useEffect)((function(){t&&function(e,t){e.on(x.CREATE_GAME_FEEDBACK,(function(e){console.log("CREATE_GAME_FEEDBACK",e),t({type:"SET_GAME_ID",payload:e.data.gameID}),t({type:"SET_PLAYERS",payload:null===e.data?[]:e.data.players})})),e.on(x.SET_PLAYER_NAME_FEEDBACK,(function(e){console.log("SET_PLAYER_NAME_FEEDBACK",e),t({type:"SET_PLAYERS",payload:null===e.data?[]:e.data.players})})),e.on(x.WINNER,(function(a){var n;(console.log("WINNER",a),t({type:"SHOW_WINNER",payload:!0}),t({type:"WINNER",payload:a.winners}),1===a.winners.length&&a.winners[0].id===e.id)&&k.a.get("https://asia-southeast2-findmymines.cloudfunctions.net/incrementUserScore?uid="+(null===(n=w.auth().currentUser)||void 0===n?void 0:n.uid))})),e.on(x.TICK,(function(e){t({type:"SET_TICK",payload:e})})),e.on(x.JOIN_GAME_FEEDBACK,(function(e){console.log("JOIN_GAME_FEEDBACK",e),t({type:"PLAYER_JOINED",payload:e.isOK}),t({type:"SET_PLAYERS",payload:null===e.data?[]:e.data.players})})),e.on(x.START_GAME_FEEDBACK,(function(e){console.log("START_GAME_FEEDBACK",e),e.isOK&&t({type:"INITIALIZE",payload:e.data})})),e.on(x.NEXT_PLAYER,(function(e){console.log("NEXT_PLAYER",e),t({type:"SET_CURRENT_PLAYER",payload:e})})),e.on(x.RESET_BOARD_FEEDBACK,(function(e){console.log("RESET_BOARD",e),t({type:"RESET_BOARD",payload:e.data})})),e.on(x.SELECT_COORDINATE_FEEDBACK,(function(e){console.log("SELECT_COORDINATE_FEEDBACK",e),e.isOK&&(t({type:"COORDINATE_FEEDBACK",payload:e.data.selectedCoordinates}),t({type:"UPDATE_PLAYERS_SCORE",payload:e.data.players}))})),e.on(x.MEMBER_JOINED_GAME,(function(e){console.log("MEMBER_JOINED_GAME",e),t({type:"MEMBER_JOINED",payload:e.member})})),e.on(x.MEMBER_LEFT_GAME,(function(e){console.log("MEMBER_LEFT_GAME",e),t({type:"MEMBER_LEFT",payload:e.member})})),e.on(x.MEMBER_CHANGED_TYPE,(function(e){console.log("MEMBER_CHANGED_TYPE",e),t({type:"MEMBER_CHANGED",payload:e})})),e.on(x.LEAVE_GAME_FEEDBACK,(function(e){console.log("LEAVE_GAME_FEEDBACK",e),e.isOK&&t({type:"LEAVE_GAME",payload:!0})}))}(t,e)}),[t,e]),l.a.createElement("div",null,l.a.createElement(E.a,{basename:"/"},l.a.createElement(Q.a,{theme:ie},l.a.createElement(s.a,null,l.a.createElement(q.a,null),l.a.createElement(Z.d,null,l.a.createElement(Z.b,{exact:!0,path:"/"},l.a.createElement(N,null)),l.a.createElement(Z.b,{path:"/play"},l.a.createElement(X,null)),l.a.createElement(Z.d,null,l.a.createElement(Z.b,{path:"/create"},l.a.createElement(ee,null)),l.a.createElement(Z.b,{path:"/join"},l.a.createElement(te,null)),l.a.createElement(Z.b,{path:"/quick-game"},"Quick Game"),l.a.createElement(Z.b,{path:"/register"},l.a.createElement(V,null)),l.a.createElement(Z.b,{path:"/leaderboard"},l.a.createElement(oe,null))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(S,null,l.a.createElement(B,null,l.a.createElement(Ee,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[119,1,2]]]);
//# sourceMappingURL=main.e8234bf0.chunk.js.map